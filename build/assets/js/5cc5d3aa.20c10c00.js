"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[19822],{19304:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/tsb-demo-timestamp-signer-3d519387303d212d87903e50c49dc602.key"},22156:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/files/sign_timestamp_with_timestamp-signer-994a4e419d5dc83f1fe22cbccc57447f.sh"},27427:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"Tutorials/TransactionSecurityBroker/Miscelanneaous/TimestampNotificationService","title":"Creating Timestamp-Signer & SKA Keys","description":"The Timestamp Notification service is employed to sign timestamp upon fetching approval tasks /v1/filteredSignApprovalTask. This proves beneficial when aiming for a centralized approach to handle and distibuting approval tasks for various approvers.","source":"@site/tsb/Tutorials/TransactionSecurityBroker/Miscelanneaous/TimestampNotificationService.md","sourceDirName":"Tutorials/TransactionSecurityBroker/Miscelanneaous","slug":"/Tutorials/TransactionSecurityBroker/Miscelanneaous/TimestampNotificationService","permalink":"/tsb/Tutorials/TransactionSecurityBroker/Miscelanneaous/TimestampNotificationService","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Creating Timestamp-Signer & SKA Keys","sidebar_label":"Approval Notification Service"},"sidebar":"tutorialSidebar","previous":{"title":"TSB Helper Scripts","permalink":"/tsb/Tutorials/TransactionSecurityBroker/Miscelanneaous/tsb-helper-script"},"next":{"title":"Key Attestation","permalink":"/tsb/Tutorials/Attestation/KeyAttestation"}}');var r=t(74848),a=t(28453),s=t(65537),o=t(79329);const l={sidebar_position:4,title:"Creating Timestamp-Signer & SKA Keys",sidebar_label:"Approval Notification Service"},c="Approval Notification Service",d={},p=[{value:"Creating a timestamp-signer certificate",id:"creating-a-timestamp-signer-certificate",level:2},{value:"Create key",id:"create-key",level:2},{value:"Create a self-signed certificate",id:"create-a-self-signed-certificate",level:2},{value:"Onboard the Timestamp Signing Certificate on TSB",id:"onboard-the-timestamp-signing-certificate-on-tsb",level:3},{value:"Creating a Approver (Key)",id:"creating-a-approver-key",level:2},{value:"Create an SKA-Key with <code>finance-officer-1</code> onboarded",id:"create-an-ska-key-with-finance-officer-1-onboarded",level:2},{value:"Create a sign-request",id:"create-a-sign-request",level:2},{value:"Fetch approval task",id:"fetch-approval-task",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"approval-notification-service",children:"Approval Notification Service"})}),"\n",(0,r.jsxs)(n.p,{children:["The Timestamp Notification service is employed to sign timestamp upon fetching approval tasks ",(0,r.jsx)(n.code,{children:"/v1/filteredSignApprovalTask"}),". This proves beneficial when aiming for a centralized approach to handle and distibuting approval tasks for various approvers."]}),"\n",(0,r.jsx)(n.p,{children:"However, it's important to note that the Timestamp Notification Service cannot sign the 'approvalToBeSigned' tasks directly, but can fetch the tasks for approvers."}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-timestamp-signer-certificate",children:"Creating a timestamp-signer certificate"}),"\n",(0,r.jsxs)(n.p,{children:["The command below generates a ",(0,r.jsx)(n.code,{children:"RSA:4096"})," key and a self-signed certificate, which is being used to verify the signed timestamp by the timestamp-signer-key."]}),"\n",(0,r.jsxs)(s.A,{groupId:"key-provider",children:[(0,r.jsxs)(o.A,{value:"OpenSSL",label:"OpenSSL",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"    openssl req -new -x509 -nodes -sha256 -newkey rsa:4096 -days 3650 -subj '/CN=TSB-Timestamp-Signer' -keyout tsb-timestamp-signer.key -out tsb-timestamp-signer.crt\n"})}),(0,r.jsx)(n.p,{children:"Generated files:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"tsb-timestamp-signer.crt"}),"\n",(0,r.jsx)(n.li,{children:"tsb-timestamp-signer.key"}),"\n"]})]}),(0,r.jsxs)(o.A,{value:"HSM",label:"PrimusHSM",default:!0,children:[(0,r.jsx)(n.h2,{id:"create-key",children:"Create key"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": /v1/key"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{12}",children:'{\n    "label": "tsb-timestamp-signer",\n    "password": null,\n    "algorithm": "RSA",\n    "keySize": 4096,\n    "attributes": {\n        "decrypt": false,\n        "sign": true,\n        "unwrap": false,\n        "extractable": false,\n        "modifiable": true,\n        "destroyable": true,\n        "copyable": false\n    },\n    "policy": null\n}\n'})}),(0,r.jsx)(n.h2,{id:"create-a-self-signed-certificate",children:"Create a self-signed certificate"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": /v1/certificate/synchronous/selfsign"]}),(0,r.jsxs)(n.p,{children:["Setting the ",(0,r.jsx)(n.code,{children:"certificateAuthority"})," to ",(0,r.jsx)(n.code,{children:"true"})," adds the BasicConstraint ",(0,r.jsx)(n.code,{children:"BC:CA:TRUE"}),", should be set for intermediate and CA Authorities."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{7,9}",children:'{\n    "signKeyName": "tsb-timestamp-signer",\n    "keyPassword": null,\n    "validity": 3650,\n    "signatureAlgorithm": "SHA256_WITH_RSA",\n    "commonName": "TSB-Timestamp-Signer",\n    "certificateAuthority": true,\n    "keyUsage": [ "DIGITAL_SIGNATURE" ],\n    "extendedKeyUsage": [ "ANY_EXTENDED_KEY_USAGE" ]\n}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n    "label": "tsb-timestamp-signer",\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIFBDCCAuygAwIBAgIBADANBgkqhkiG9w0BAQsFADAbMRkwFwYDVQQDExBDQS1TZWN1cm9zeXMtMDAxMB4XDTI0MDIwNzAwMDAwMFoXDTM0MDIwNDAwMDAwMFowGzEZMBcGA1UEAxMQQ0EtU2VjdXJvc3lzLTAwMTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAK22q8jAJLTSY0qwKOZQd6srgC+04NzbP211aLNaE9VSa0jYgmTeCbE2UkDthElTtnfX/HtTO/brTVJYi354e7kjOGpt65ILDYr8h0+QZmovhGPXqjV0r8c+2bLYd14LB7n32MeRXUjCszb2JD5WEvpiFLORqcDYgRrZT8csWAl445TDfFr0uRE7OCSsyNVTfoDh4w6GpNv++xNs9iFVyOOlLikwBBdXFaUQh67SDqWxvMSDv9Ihg91yECe1VPrF1UvlHST486TrgC7TAg1XD9GPY51Gh/FA9GHoefCVGMQtNjRkWJdTHX3P0x8xiVj5enWuHRTlheUJQkrjPp4mPvC3ImZUOBgKm6qMEYaOqncOs2aVMYLiWJ9YNZlMUzrUbHzYZiGt0K6b7z5tZP8V00zAFhjoyc7Y8+kX+rLy0EYdUWKU1QwjeK7i9bfHt/rr/eKDXaJmekIPD3SrbyxmjzZMzjWVdDE7b0pzl+DJmiyvheqdkXMuWlzNbo4kvrKu1Q7duEYz1I20EWiZn6qJ1lDu/+tP7XBzAgbyEItzwZfvkNe9Cew9kPRRfgbD9DsPx7KsHmszcGOiJQG4ptuz92OX875e9ExtfzkgDIHLgyDrVh63VDE3DjQS/yqUmEcdUZjd94OvsOF+hSBX4ig9sBhz15WdvxfpgRGM8lESdq21AgMBAAGjUzBRMAwGA1UdEwQFMAMBAf8wEgYDVR0lAQH/BAgwBgYEVR0lADAOBgNVHQ8BAf8EBAMCAoQwHQYDVR0OBBYEFAYu0YvvQ+bTdV2YMa760e/TwOpxMA0GCSqGSIb3DQEBCwUAA4ICAQCDGjhIyK5o+skscqjqzknTV/wO5jiYXz2ikLQdtU8n8FfV8zm/+/pXtG/K+7+UNCdtXWAzRMKVtkgKLh8pKl4qxb6KvDKsWtaximX7iEYKAlCGBGhs3pt1JwktirYrZ35NdclCj4WWmJhoLdIG2ao4EIaRi1KsU6ExmB1IB7yWJymKdjJkWollFCHdAfUyCpjMX1fg6B1P+JUkQYmnvP74xGzKmB1eq2ofdsTOrYnTaNGrcayGn+1DuwwcmBPQ/qAfDgTrmcbEEeXiOwl6Rca26M8yBriQzoMTkYga7EGrLyfFkQLyPLzXY852wkqHqae7g3ZMzRbf5aC9ACTxDRT/JFfyFTanNcdD9UeEBs0lf8v1BFtRdpVQjSYiWKnxRK5QzmBiYCESZS//kqItU80Kfqi/ZwALwb7D0+yAZuBwO4zSTM8+/R0q7yk9F+zw9OjcV3v4e0Jq57GHcqCpGJlIuj437azQLtmjCTlWe8p5DOfsGR8/xCbKtepu2NYoLrrb0a+5jU8tyovoUHxexQDttMq49Mi+RMUg5jTlVLN7viGk78nwL9WkARQHpVimjEDLVdRW1Q05fMzR8sFUjtc87FcwKOhyKhdIvxq65+spyQ0oTE/DguF65m0x182Z1HrHZOLZQ7+C8+HPkOUjQjvM0Bg47o8qL+X68Pa9VeGMSg==\\n-----END CERTIFICATE-----"\n}\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"onboard-the-timestamp-signing-certificate-on-tsb",children:"Onboard the Timestamp Signing Certificate on TSB"}),"\n",(0,r.jsxs)(n.p,{children:["To check the timestamp signature for approval-task retrieval, add the timestamp signing certificate to the application.yml file in TSB's ",(0,r.jsx)(n.code,{children:"application-local.yml"})," configuration file."]}),"\n",(0,r.jsx)(n.admonition,{title:"CloudsHSM - TSB(aaS)",type:"tip",children:(0,r.jsxs)(n.p,{children:["if you are using Securosys TSBaaS, please open a ",(0,r.jsx)(n.a,{href:"https://support.securosys.com/external/ticket/create/process?ProcessID=Process-7a3f614acdb3234a286b908170c7bb0e&ServiceID=31&TypeID=18&PriorityID=3&DynamicField_AddAsset=1&Article.Subject=Provider%20REST%3A%20",children:"support-ticket"})," and send the certificate attached to the ticket, we will onboard the timestamp signing certificate for you."]})}),"\n",(0,r.jsx)(n.p,{children:"Locally deployed TSB instances need to configure the Certificate manually, by following these steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Open"})," ",(0,r.jsx)(n.code,{children:"application-local.yml"}),"of your TSB-deployment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Find"})," or add ",(0,r.jsx)(n.code,{children:"general.allowedTimestampSigningCertificates"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add"})," the certificate filepath to the list of ",(0,r.jsx)(n.code,{children:"allowedTimestampSigningCertificates"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Redeploy"})," the docker container, make sure, the certificate exists at the given file-location and is properly mapped into your containers volume."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",children:"general:\n  allowedTimestampSigningCertificates: # optional, configured certificates can fetch and delete all tasks for an approver\n    - file:/etc/app/config/tsb-timestamp-signer.crt\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-approver-key",children:"Creating a Approver (Key)"}),"\n",(0,r.jsxs)(n.p,{children:["Various samples on how to create an Approval key for ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"finance-officer-1"})})," is show here: ",(0,r.jsx)(n.a,{href:"/tsb/Tutorials/TransactionSecurityBroker/PrimusAuthorizationApp/create-approver-legacy",children:"Create Approver Key"})]}),"\n",(0,r.jsxs)(n.h2,{id:"create-an-ska-key-with-finance-officer-1-onboarded",children:["Create an SKA-Key with ",(0,r.jsx)(n.code,{children:"finance-officer-1"})," onboarded"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": /v1/key"]}),"\n",(0,r.jsxs)(n.p,{children:["By including the ",(0,r.jsx)(n.code,{children:"public-key"})," of the previously created ",(0,r.jsx)(n.code,{children:"finance-officer-1"})," in the SKA-Key, you designate the officer responsible for approving signing and encryption requests."]}),"\n",(0,r.jsxs)(n.p,{children:["The following request creates a ",(0,r.jsx)(n.a,{href:"/tsb/Concepts/key/Algorithms",children:"Elliptic Curve"})," SKA-Key with simple policy, e.g. only ",(0,r.jsx)(n.code,{children:"ruleUse"})," is applied, ",(0,r.jsx)(n.code,{children:"ruleBlock"}),", ",(0,r.jsx)(n.code,{children:"ruleUnblock"}),", ",(0,r.jsx)(n.code,{children:"ruleModify"})," is ignored and stays empty."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Adapt the command below with the public-key of the ",(0,r.jsx)(n.code,{children:"finance-officer-1"})," created above."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{2,16,34}",children:'{\n    "label": "Broker-Transaction-Key-01",\n    "algorithm": "EC",\n    "curveOid": "1.3.132.0.10",\n    "attributes": {\n        "encrypt": true,\n        "decrypt": true,\n        "verify": true,\n        "sign": true,\n        "wrap": true,\n        "unwrap": true,\n        "derive": false,\n        "bip32": false,\n        "extractable": false,\n        "modifiable": true,\n        "destroyable": true,\n        "sensitive": true,\n        "copyable": true\n    },\n    "policy": {\n        "ruleUse": {\n        "tokens": [\n            {\n            "name": "FinanceOfficers",\n            "timelock": 0,\n            "timeout": 600,\n            "groups": [\n                {\n                "name": "finance-officer1",\n                "quorum": 1,\n                "approvals": [\n                    {\n                    "type": "public_key",\n                    "value": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEBSBisLXR8Lsdpsc9JFeFYzMegPqufyNjk6ncWOFbb9bPMuM3I6SSDzwFNX+XvVO1EkfavxaXQcH43sEuKeYGKw=="\n                    }\n                ]\n                }\n            ]\n            }\n        ]\n        },\n        "ruleBlock": null,\n        "ruleUnblock": null,\n        "ruleModify": null,\n        "keyStatus": {\n        "blocked": false\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"create-a-sign-request",children:"Create a sign-request"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": /v1/sign"]}),"\n",(0,r.jsxs)(n.p,{children:["Generate a sign request to be approved by the approver ",(0,r.jsx)(n.code,{children:"finance-officer-1"}),". You can use the metadata-field to provide information to the approver about the contents of the sign request."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{3,5}",children:'{\n  "signRequest": {\n    "payload": "c2VjdXJvc3lz",\n    "payloadType": "UNSPECIFIED",\n    "signKeyName": "Broker-Transaction-Key-01",\n    "keyPassword": null,\n    "metaData": "ewoiYXBsaWNhdGlvbl9uYW1lIjoiSENWYXVsdCIsCiJjb3JlcyI6InRyYW5zYWN0aW9uLXNpZ25pbmciCn0=",\n    "signatureAlgorithm": "NONE_WITH_ECDSA"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["TSB has created approval tasks for each onboarded approver in the backend. In our case only one task for ",(0,r.jsx)(n.code,{children:"finance-officer-1"}),". These tasks must now be retrieved and approved, as shown below."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n  "signRequestId": "c0743837-cd46-4f3f-8822-b4f256d86bd2"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"fetch-approval-task",children:"Fetch approval task"}),"\n",(0,r.jsxs)(n.p,{children:["The approval task can now be fetched by the ",(0,r.jsx)(n.code,{children:"timestamp-signer"}),", that we previously onboarded in the ",(0,r.jsx)(n.code,{children:"application-local.yml"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The timestamp ",(0,r.jsx)(n.code,{children:"2024-02-08T10:12:46+00:00"})," is signed by the ",(0,r.jsx)(n.code,{children:"timestamp-signer.key"})," and the signature passed on to the ",(0,r.jsx)(n.code,{children:"timestampSignature"})," field."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"timestampSigningCertificate"})," is the certificate previously onboarded in the ",(0,r.jsx)(n.code,{children:"application-local.yml"})]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"approverPublicKey"})," is (optional), if specified the task can be fetch for one specific approver."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": /v1/filteredSignApprovalTask"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{2-5}",children:'{\n  "timestamp": "2024-02-08T11:17:30+00:00",\n  "timestampSignature": "XOesAfEV1RiTySjKocOlYxqjZpErMXnV5xOflTM3UnfxkItNsFCpJa1qhhTq8qkOw9hpB2M1DUInfa9xOtjUSiYPh6PkeRxyq4miOPvICU7zRFV6OZsFtzg+oOL0iMY9TiJEDg1fpwfvLXkiuWHYt+vNybWeK8IakYBH6+xtThwJmC3IVXvaNsneRy0oVqLWggRycRWKon9et440XdNCnDh3OnfZc1sODzMv0H0frg5wyEbVtClr0A7x+X8LC3pwHCHgp+ZoVc9TvbkxUeD/eQm+oVHB5x5jbjd1d+LeyEZE8cnQ5THZH0dgHQefZUS002gMx9DGfKPHnsKanAuYoaJNMqHhSUbtTponKyfnqyQG+TAnZstCSoksrKBmHIYlvm/pUFNdE5OUOg53W5rriM/DUNbYAQpzChm+5s+koMvcy/a/ZpifGBFC7JbE8onkNt96Tj8nxqh2SVyouTfoLfv3Wxj3itxtc3/ENSxpj+8qC+oDQCJf5TfGR8mlt2hLzUbNwCi0L12bB8CVTfyn3AbpZJ2O6G8MgjIIz4nWVb4WPbjYUNofN3N7SmcPtoCEkx/0Kw2aoqbyCugylRpa8bFW1KXQCaSA+vWX1up9vnb5YnHwOrl42PSK6YmrkKqguvcSwfGztkNpc9eIMYPy3+aLvZsp4hjd7HAichJNgME=",\n  "timestampSigningCertificate": "MIIFJTCCAw2gAwIBAgIUJyZ+70EZshas5hekGw6WTqAc/uowDQYJKoZIhvcNAQELBQAwIjEgMB4GA1UEAwwXcHJpbXVzZGV2LmNsb3Vkc2hzbS5jb20wHhcNMjQwMjAxMDg1MjU2WhcNMzQwMTI5MDg1MjU2WjAiMSAwHgYDVQQDDBdwcmltdXNkZXYuY2xvdWRzaHNtLmNvbTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAKNKukSs6g+nlVrXKc+TkpCYml0vZQ2OaWwAoC32XIkR+/URf1X2Q+WMPjJkg7bl2VW3SL4GFmohDJm6hag2QBBpgFyCaEQ7g8QoQoopp+tPiCPGTRVYIVsGHctUhcX01SigQ1fYVCinbTdmWEVcGhkT1fFND5sEhgwsMQGDJTg0eKBlVxs6AF/+mMoQxQCdCjUiHzvqlylDgT70RwLbmZy4amTdInzK6VvfW+W5+l3rABNxgnC9fyr2/dAa9SYBApNh8V9098BXEMplyk0AERgLrrcOt4PdxdM/VLLBSmd4VINW3GU467WMvL90lNxGHq3Zi1zievIb7A2Y6vZcsYUAQYOAb5WaUkCl1WtWBxMK9ecrCorqU38PkH9eP3d1NgDnBqZjs58taItLTl/iCuqT9xrAvNu+nSeYvCn5zbgYpmlFx7/nD8GKcKYX9HpiOXvLx3mX6UJczx/Ey7g6OyWSrHPEcE+vcZCtvVrggSzSDrbG0xmF5Z4eyViIm7Q1ZZ3OiZHn8AevBgigwQ5P/lqheS5GrpnnC6oVMWLk5DL0HCZJc3vhd8RjuIWbnO1Sl3Gi3uR97dUbhfpi6Lga23APKRIGo8D2VqrBomgF6WP0wuleVk6y8SoHes27xlYJx2pwpeGp116ZttijJ+aMCIRgeX0QTBH4UENqp/IE7XfRAgMBAAGjUzBRMB0GA1UdDgQWBBQ1c7jH3yKX9xl35nD2Q9KQF1KzNzAfBgNVHSMEGDAWgBQ1c7jH3yKX9xl35nD2Q9KQF1KzNzAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4ICAQCZ0SOpweNCSUdrFgL15CpwWJfb84EmQ5fx8gLxLpCYKywV+Eh3JpPICPubP0zC1FWPiX9Hiy86orv9OOn5kbEcDn9wEa2452V/tzSK6evTW+/jpY4di+xdqzqPfK5BEKlJ6I199MTT6Wco4KOmwN2KEpojsOM3MjytoDaGwBjRe8jd757P4t6beDMvpwaimlXpjsK9IaQAH2aFQjraDILlcn+T8doZpIvyt77XAn1xJVhT/Su07BKe9/CyHRo9bexxMuFtXX3fw/3KtJM8LgxLDRSEq1jOao4iDA96bij/3E9Nwx1JtusGVge1HMyYZITbQDNmSTz5RR5tN0oUg9shB74hTeI+qNIEQ/MW/kiG0TEL+AY3nu1XfVX/7s75XIBQMwHrjsdYR5J7qi8pgfwVQ5AAjkHA/HdEX5DGIWQoqrKhIPTyLnxzFDCIubLyt2cF23slrTsnulhmCaXrWHoKTYdFMo2wzV25ABUJUJoCZSxgtXjVPkM8VcKJk2AnD3sv9EOkx+U/syzvv6amduRLF5eDgxTPn/O7Gh+WKgify9KvbHFbEPkk3Xq0zv26sWGRDzGe20zxpFeYOaibDkJ/5Ymv2/RHjMYALBMaHixru0PnFSER/+akQxjl0xPoEyJ9GkhulVcPaawyP6aJsIDnOd/hSZLS7wT+H3tvC4pY4A==",\n  "approverPublicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEBSBisLXR8Lsdpsc9JFeFYzMegPqufyNjk6ncWOFbb9bPMuM3I6SSDzwFNX+XvVO1EkfavxaXQcH43sEuKeYGKw==",\n  "timestampDigestAlgorithm": "SHA-256",\n  "detailLevel": "level1",\n  "paging": {\n    "pageNumber": 0,\n    "pageSize": 1,\n    "sortOrder": "CREATION_DATE_ASC"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The timestamp ",(0,r.jsx)(n.code,{children:"timestampSigningCertificate"})," in the request above is already onboarded on ",(0,r.jsx)(n.a,{href:"https://tsb-demo.cloudshsm.com/",children:"https://tsb-demo.cloudshsm.com"})," instance for testing purposes."]}),"\n",(0,r.jsxs)(n.li,{children:["The private key to sign the ",(0,r.jsx)(n.code,{children:"timestamp"})," can be obtained here: ",(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(19304).A+"",children:"tsb-demo-timestamp-signer.key"})]}),"\n",(0,r.jsxs)(n.li,{children:["The scirpt ",(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(22156).A+"",children:"sign_timestamp_with_timestamp-signer.sh"})," creates the request-body for POST /v1/filteredSignApprovalTask"]}),"\n"]})}),"\n",(0,r.jsxs)(n.p,{children:["The response is a challenge ",(0,r.jsx)(n.code,{children:"approvalToBeSigned"}),' that needs to be signed by the approver named "finance-office-1."\n',(0,r.jsx)(n.strong,{children:"Respone:"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",metastring:"{6}",children:'{\n  "tasks": [\n    {\n      "detailLevel": "level1",\n      "id": "c8dfe0b7-9e4b-4f1b-b792-dcc62eb650f9",\n      "approvalToBeSigned": "0AAAADsABAABAAAAAhAZAEJyb2tlci1UcmFuc2FjdGlvbi1LZXktMDEAAABUEDQAMAAAAFcQCQBzZWN1cm9zeXMAAAAHAQgA9bfEZQAAAAACEA0AdGltZXN0YW1wLWtleQAAAFYQWgAwWDAMBggqhkjOPQQDAgUAA0gAMEUCID1N3RL1dIikAHTWiQWWtwLUdFIRHS2ZqAhx46ZsJU8yAiEA6LzgUSw+dVbFUUvOI/XkgZu739yvejXSZcMUvOjPW7YAAFcQCQBzZWN1cm9zeXMAAAA=",\n      "approverPublicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEBSBisLXR8Lsdpsc9JFeFYzMegPqufyNjk6ncWOFbb9bPMuM3I6SSDzwFNX+XvVO1EkfavxaXQcH43sEuKeYGKw=="\n    }\n  ]\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}},65537:(e,n,t)=>{t.d(n,{A:()=>y});var i=t(96540),r=t(34164),a=t(65627),s=t(56347),o=t(50372),l=t(30604),c=t(11861),d=t(78749);function p(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return p(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:r}}=e;return{value:n,label:t,attributes:i,default:r}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const r=(0,s.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(a),(0,i.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=u(e),[s,l]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:a}))),[c,p]=g({queryString:t,groupId:r}),[m,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,a]=(0,d.Dv)(t);return[r,(0,i.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:r}),A=(()=>{const e=c??m;return h({value:e,tabValues:a})?e:null})();(0,o.A)((()=>{A&&l(A)}),[A]);return{selectedValue:s,selectValue:(0,i.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),f(e)}),[p,f,a]),tabValues:a}}var f=t(9136);const A={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function j(e){let{className:n,block:t,selectedValue:i,selectValue:s,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),r=o[t].value;r!==i&&(c(n),s(r))},p=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{l.push(e)},onKeyDown:p,onClick:d,...a,className:(0,r.A)("tabs__item",A.tabItem,a?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function x(e){const n=m(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",A.tabList),children:[(0,b.jsx)(j,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function y(e){const n=(0,f.A)();return(0,b.jsx)(x,{...e,children:p(e.children)},String(n))}},79329:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var i=t(34164);const r={tabItem:"tabItem_Ymn6"};var a=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,s),hidden:t,children:n})}}}]);