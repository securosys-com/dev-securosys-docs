"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[94122],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var l=s(96540);const i={},t=l.createContext(i);function r(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(t.Provider,{value:n},e.children)}},90273:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"Installation/installation","title":"Installing Secrets Engine plugin for HashiCorp Vault","description":"Installing Securosy\' Secrets Engine plugin for HashiCorp Vault","source":"@site/hc_sse/Installation/installation.md","sourceDirName":"Installation","slug":"/Installation/","permalink":"/hc_sse/Installation/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Installing Secrets Engine plugin for HashiCorp Vault","sidebar_label":"Install the plugin","description":"Installing Securosy\' Secrets Engine plugin for HashiCorp Vault","keywords":["hsm","cloud hsm"]},"sidebar":"tutorialSidebar","previous":{"title":"Prerequisites","permalink":"/hc_sse/Installation/prerequisites"},"next":{"title":"Configure the plugin","permalink":"/hc_sse/Installation/configuration"}}');var i=s(74848),t=s(28453);const r={sidebar_position:2,title:"Installing Secrets Engine plugin for HashiCorp Vault",sidebar_label:"Install the plugin",description:"Installing Securosy' Secrets Engine plugin for HashiCorp Vault",keywords:["hsm","cloud hsm"]},a="Installing Secrets Engine plugin",o={},c=[{value:"1. Install Hashicorp Vault",id:"1-install-hashicorp-vault",level:2},{value:"2. Register the plugin",id:"2-register-the-plugin",level:2},{value:"3. Enable the plugin",id:"3-enable-the-plugin",level:2},{value:"4. Upgrade the plugin",id:"4-upgrade-the-plugin",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"installing-secrets-engine-plugin",children:"Installing Secrets Engine plugin"})}),"\n",(0,i.jsx)(n.h2,{id:"1-install-hashicorp-vault",children:"1. Install Hashicorp Vault"}),"\n",(0,i.jsx)(n.p,{children:"Install Hashicorp Vault:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"../../hc_vault/category/installation",children:"Installation guide"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"2-register-the-plugin",children:"2. Register the plugin"}),"\n",(0,i.jsxs)(n.p,{children:["Add the following parameter in the configuration file ",(0,i.jsx)(n.code,{children:"config.hcl"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"plugin_directory"})," - must contain the absolute path to the directory where the plugins are stored"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Use the following command to register the plugin:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ vault plugin register -sha256={binary_checksum} secret securosys-hsm\n"})}),"\n",(0,i.jsx)(n.h2,{id:"3-enable-the-plugin",children:"3. Enable the plugin"}),"\n",(0,i.jsxs)(n.p,{children:["After building the plugin, it must be ",(0,i.jsx)(n.strong,{children:"enabled"})," with the following command before running it on the test server:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ vault secrets enable securosys-hsm\n"})}),"\n",(0,i.jsx)(n.p,{children:"The result should be:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ Success! Enabled the securosys-hsm secrets engine at: securosys-hsm/\n"})}),"\n",(0,i.jsx)(n.h2,{id:"4-upgrade-the-plugin",children:"4. Upgrade the plugin"}),"\n",(0,i.jsx)(n.p,{children:"To upgrade a binary of an existing working plugin, follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy the new plugin binary to the plugin_directory."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Register a new version of the plugin."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ vault plugin register -sha256={binary_checksum} -version={new-version} secret securosys-hsm\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Tune the existing mount to reconfigure it to use the newly registered version."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ vault secrets tune -plugin-version={new-version}  securosys-hsm\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Reload the plugin"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ vault plugin reload -plugin securosys-hsm\n"})}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);