"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[7040],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(96540);const r={},s=a.createContext(r);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:n},e.children)}},65041:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"ossl-legacy/Installation/installation","title":"Installing OpenSSL 1.1 for PKCS#11","description":"Discover OpenSSL\'s PKCS11 provider, CLI commands, installation tips, and troubleshooting. Integrate seamlessly with HSM for enhanced security.","source":"@site/openssl/ossl-legacy/Installation/installation.md","sourceDirName":"ossl-legacy/Installation","slug":"/ossl-legacy/Installation/","permalink":"/openssl/ossl-legacy/Installation/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Installing OpenSSL 1.1 for PKCS#11","sidebar_label":"Installation","description":"Discover OpenSSL\'s PKCS11 provider, CLI commands, installation tips, and troubleshooting. Integrate seamlessly with HSM for enhanced security.","keywords":["OpenSSL PKCS11 provider","OpenSSL PKCS11 API","OpenSSL command line utility (CLI)","OpenSSL CLI commands","OpenSSL installation guide","OpenSSL installation troubleshooting","OpenSSL troubleshooting tips","OpenSSL certificate management","OpenSSL certificate creation","OpenSSL certificate renewal","OpenSSL configuration file","OpenSSL configuration options","OpenSSL configuration guide","OpenSSL encryption algorithms","OpenSSL decryption methods","OpenSSL digital signatures","OpenSSL SSL/TLS protocols","OpenSSL SSL/TLS configuration","OpenSSL heartbleed vulnerability","OpenSSL security updates"]},"sidebar":"openssl","previous":{"title":"Prerequisites","permalink":"/openssl/ossl-legacy/Installation/prerequisites"},"next":{"title":"Configuration","permalink":"/openssl/ossl-legacy/Installation/configuration"}}');var r=t(74848),s=t(28453),i=t(65537),o=t(79329);const l={sidebar_position:2,title:"Installing OpenSSL 1.1 for PKCS#11",sidebar_label:"Installation",description:"Discover OpenSSL's PKCS11 provider, CLI commands, installation tips, and troubleshooting. Integrate seamlessly with HSM for enhanced security.",keywords:["OpenSSL PKCS11 provider","OpenSSL PKCS11 API","OpenSSL command line utility (CLI)","OpenSSL CLI commands","OpenSSL installation guide","OpenSSL installation troubleshooting","OpenSSL troubleshooting tips","OpenSSL certificate management","OpenSSL certificate creation","OpenSSL certificate renewal","OpenSSL configuration file","OpenSSL configuration options","OpenSSL configuration guide","OpenSSL encryption algorithms","OpenSSL decryption methods","OpenSSL digital signatures","OpenSSL SSL/TLS protocols","OpenSSL SSL/TLS configuration","OpenSSL heartbleed vulnerability","OpenSSL security updates"]},c="Installation",u={},d=[];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,r.jsx)(n.p,{children:"This procedure provides a straightforward integration process, which\nhas been tested. Please take notice that there may be other ways to\nachieve it. This guide assumes that you are familiar with the Primus\nHSM, Linux operating system installation and configuration procedures,\nOpenSSL configuration etc. and does not cover every step of the\nhardware and software setup process. The application note does not\ncover firewall nor SELinux configuration.  The following installation\nand configuration description are based on Rocky Linux 8 and may\nslightly differ for other Linux distributions."}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["Versions of the Securosys PKCS#11 Provider before v2.1 were shipped\nincluding a version of OpenSSL and httpd. It is not recommended to use\nthese versions anymore. Make sure that they are no longer part of the\n",(0,r.jsx)(n.code,{children:"PATH"})," or ",(0,r.jsx)(n.code,{children:"LD_LIBRARY_PATH"})," variables. Use the following variable\ndefinitions instead:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export PRIMUS_HOME=/usr/local/primus\nexport PATH=$PRIMUS_HOME/bin:$PATH\nexport LD_LIBRARY_PATH=$PRIMUS_HOME/lib:$LD_LIBRARY_PATH\n"})})]}),"\n",(0,r.jsxs)(n.p,{children:["Install the packages for your distribution according to the\n",(0,r.jsx)(n.a,{href:"/openssl/ossl-legacy/Installation/prerequisites",children:"prerequisites"}),". On\nRocky Linux 8 the opensc and p11-kit package are necessary for all\nscenarios."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo yum install opensc p11-kit\n"})}),"\n",(0,r.jsx)(n.p,{children:"Depending on the use case additional packages need to be installed."}),"\n",(0,r.jsxs)(i.A,{groupId:"scenario",children:[(0,r.jsxs)(o.A,{value:"ossl",label:"OpenSSL",default:!0,children:[(0,r.jsx)(n.p,{children:"To use the p11-kit in combination with OpenSSL additionally install\nthe openssl-pkcs11 package."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo yum install openssl-pkcs11\n"})}),(0,r.jsx)(n.p,{children:"Ensure that the correct version of OpenSSL from your OS is used and\nnot the one included in the Primus provider package with the following\ncommand:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl version\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"OpenSSL 1.1.1k  FIPS 25 Mar 2021\n"})})]}),(0,r.jsxs)(o.A,{value:"apache",label:"Apache/httpd",children:[(0,r.jsxs)(n.p,{children:["The httpd webserver requires the ",(0,r.jsx)(n.strong,{children:"P11-Kit and OpenSSL modules and configuration"})," with Primus\nintegrated plus following modules:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo yum install httpd mod_ssl\n"})}),(0,r.jsx)(n.p,{children:"Ensure that the Apache/httpd from your OS is used and not the\none included in the Primus provider package with the following\ncommand:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"httpd -v\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"Server version: Apache/2.4.37 (rocky)\nServer built:   Aug 17 2023 23:57:25\n"})})]}),(0,r.jsxs)(o.A,{value:"nginx",label:"Nginx",children:[(0,r.jsx)(n.p,{children:"Nginx (Engine X) is a popular, powerful and high-performance\nopen-source HTTP web server and reverse proxy server with a scalable\nevent-drive (asynchronous) architecture. It can also be used as a load\nbalancer, mail proxy, and HTTP cache due to its speed, stability,\nfeature-rich set, easy configuration, and low resource utilization."}),(0,r.jsx)(n.p,{children:"Because Nginx also uses the OpenSSL for cryptographic operations,\nsupport for PKCS #11 must go through the openssl-pkcs11 engine. Nginx\ncurrently supports only loading private keys from an HSM, and a\ncertificate must be provided separately as a regular file."}),(0,r.jsx)(n.p,{children:"The Nginx webserver requires above P11-Kit and OpenSSL modules and\nconfiguration with Primus integrated plus following modules"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo yum install nginx\n"})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},65537:(e,n,t)=>{t.d(n,{A:()=>x});var a=t(96540),r=t(34164),s=t(65627),i=t(56347),o=t(50372),l=t(30604),c=t(11861),u=t(78749);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function S(e){let{queryString:n=!1,groupId:t}=e;const r=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=p(e),[i,l]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:s}))),[c,d]=S({queryString:t,groupId:r}),[g,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,u.Dv)(t);return[r,(0,a.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),m=(()=>{const e=c??g;return h({value:e,tabValues:s})?e:null})();(0,o.A)((()=>{m&&l(m)}),[m]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=t(9136);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function v(e){let{className:n,block:t,selectedValue:a,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),r=o[t].value;r!==a&&(c(n),i(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>{l.push(e)},onKeyDown:d,onClick:u,...s,className:(0,r.A)("tabs__item",m.tabItem,s?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function y(e){let{lazy:n,children:t,selectedValue:s}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function L(e){const n=g(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",m.tabList),children:[(0,b.jsx)(v,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function x(e){const n=(0,f.A)();return(0,b.jsx)(L,{...e,children:d(e.children)},String(n))}},79329:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var a=t(34164);const r={tabItem:"tabItem_Ymn6"};var s=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,i),hidden:t,children:n})}}}]);