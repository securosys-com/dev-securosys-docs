"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[18939],{5491:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"Installation/Updating-Upgrading","title":"Updating Microsoft CNG for Security HSM","description":"Updating Microsoft CNG for Securosys Hardware Security Modules (HSMs)","source":"@site/mscng/Installation/Updating-Upgrading.md","sourceDirName":"Installation","slug":"/Installation/Updating-Upgrading","permalink":"/mscng/Installation/Updating-Upgrading","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Updating Microsoft CNG for Security HSM","sidebar_label":"Updating","description":"Updating Microsoft CNG for Securosys Hardware Security Modules (HSMs)","keywords":["hsm","cloud hsm"]},"sidebar":"tutorialSidebar","previous":{"title":"Configuring the HSM","permalink":"/mscng/Installation/Configuring"},"next":{"title":"Tutorial","permalink":"/mscng/category/tutorial"}}');var t=n(74848),s=n(28453);const a={sidebar_position:6,title:"Updating Microsoft CNG for Security HSM",sidebar_label:"Updating",description:"Updating Microsoft CNG for Securosys Hardware Security Modules (HSMs)",keywords:["hsm","cloud hsm"]},d="Updating CNG/KSP Provider",o={},l=[{value:"General Prerequisites",id:"general-prerequisites",level:2},{value:"Updating from CNG/KSP Provider V1.3x",id:"updating-from-cngksp-provider-v13x",level:2},{value:"Updating from CNG/KSP Provider V1.2x",id:"updating-from-cngksp-provider-v12x",level:2},{value:"Additional Prerequisites",id:"additional-prerequisites",level:3},{value:"Update Procedure",id:"update-procedure",level:3}];function c(e){const i={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"updating-cngksp-provider",children:"Updating CNG/KSP Provider"})}),"\n",(0,t.jsxs)(i.p,{children:["In certain cases, the ",(0,t.jsx)(i.strong,{children:"CNG/KSP Provider"})," may need to be updated to benefit from new HSM functionalities."]}),"\n",(0,t.jsx)(i.p,{children:"The update procedure depends on the currently installed versions and the versions to be installed:"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Procedure when updating to from \u2026"}),(0,t.jsx)(i.th,{children:"V1.2x (Legacy Installer)"}),(0,t.jsx)(i.th,{children:"V1.3x or newer (MSI Package)"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"V1.2x or older"}),(0,t.jsxs)(i.td,{children:["Update procedure (see ",(0,t.jsx)(i.a,{href:"/mscng/Installation/Updating-Upgrading#updating-from-cngksp-provider-v12x",children:"Updating from CNG/KSP Provider V1.2x"}),"): - uninstall old version ",(0,t.jsx)("br",{})," - install new version ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(i.strong,{children:"configure KSP again"})]}),(0,t.jsxs)(i.td,{children:["Upgrade procedure (see ",(0,t.jsx)(i.a,{href:"/mscng/Installation/Updating-Upgrading#updating-from-cngksp-provider-v12x",children:"Updating from CNG/KSP Provider V1.2x"}),"): ",(0,t.jsx)("br",{})," - uninstall old version ",(0,t.jsx)("br",{})," - install new version ",(0,t.jsx)("br",{})," - configure KSP again"]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"V1.3x or newer"}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.em,{children:"(downgrade requires deinstallation of the installed provider)"})}),(0,t.jsxs)(i.td,{children:["Update procedure (see ",(0,t.jsx)(i.a,{href:"/mscng/Installation/Updating-Upgrading#updating-from-cngksp-provider-v13x",children:"Updating from CNG/KSP Provider V1.3x"}),"): ",(0,t.jsx)("br",{})," - apply new MSI package (keeps current configuration)"]})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"general-prerequisites",children:"General Prerequisites"}),"\n",(0,t.jsxs)(i.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(i.a,{href:"../downloads",children:"Download"})," the latest (or required) CNG/KSP Provider and corresponding release notes.."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","Carefully consult the CNG (and HSM) release notes concerning changes, dependencies and incompatibility issues."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","If upgrading from a version V1.32, consult the ",(0,t.jsx)(i.a,{href:"/mscng/Tutorial/Key-Access",children:"Key Accessibility"})," section."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","Validate the update for application compatibility in a ",(0,t.jsx)(i.strong,{children:"non-productive test"})," environment."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","Get the necessary administrator rights for the update procedure."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","Collect any necessary credentials (or people) in case of Windows server restart."]}),"\n",(0,t.jsxs)(i.li,{className:"task-list-item",children:[(0,t.jsx)(i.input,{type:"checkbox",checked:!0,disabled:!0})," ","Allocate a maintenance slot for the update procedure."]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"updating-from-cngksp-provider-v13x",children:"Updating from CNG/KSP Provider V1.3x"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Apply the new MSI package (interactive or via MS group policy) to update an existing CNG/KSP Provider V1.3x or newer. By default, the existing configuration will be retained."}),"\n",(0,t.jsxs)(i.li,{children:["In case of ",(0,t.jsx)(i.strong,{children:"Registry Access Hardening"}),", check/reapply the hardening steps according to\n",(0,t.jsx)(i.a,{href:"/mscng/Tutorial/Hardening",children:"this section"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"updating-from-cngksp-provider-v12x",children:"Updating from CNG/KSP Provider V1.2x"}),"\n",(0,t.jsx)(i.h3,{id:"additional-prerequisites",children:"Additional Prerequisites"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:'Take note of the existing CNG/KSP configuration values of the Securosys "Key Storage Provider Configuration" tool: Identifier, Hostname, Port Number, Priority and Global Parameters.'}),"\n",(0,t.jsx)(i.li,{children:"Obtain the HSM (and Proxy) Credentials from your responsible Security Officer (he will eventually generate a new setup password as this credential has limited validity)."}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"update-procedure",children:"Update Procedure"}),"\n",(0,t.jsx)(i.p,{children:"Updating an existing installation requires uninstalling the current CNG/KSP Provider, which may result in the loss of configuration settings and could necessitate a Windows restart."}),"\n",(0,t.jsxs)(i.p,{children:["After a successful uninstall, please proceed with a new installation as shown in the ",(0,t.jsx)(i.a,{href:"../category/installation",children:"Installation chapter"}),"."]})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>d});var r=n(96540);const t={},s=r.createContext(t);function a(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);