"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[25956],{3427:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Tutorials/create-and-approve-requests","title":"Creating requests with the Authorization App","description":"This page is about creating a Smart Key Attributes Task, which has to be signed by approvers.","source":"@site/AuthorizationApp/Tutorials/create-and-approve-requests.md","sourceDirName":"Tutorials","slug":"/Tutorials/create-and-approve-requests","permalink":"/AuthorizationApp/Tutorials/create-and-approve-requests","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Creating requests with the Authorization App","sidebar_label":"3. Create and Approve Requests","description":"This page is about creating a Smart Key Attributes Task, which has to be signed by approvers."},"sidebar":"tutorialSidebar","previous":{"title":"Delete Approver","permalink":"/AuthorizationApp/Tutorials/ApproverManagment/Miscellaneous/delete_approver"},"next":{"title":"Concepts","permalink":"/AuthorizationApp/category/concepts"}}');var i=r(74848),n=r(28453);const o={sidebar_position:3,title:"Creating requests with the Authorization App",sidebar_label:"3. Create and Approve Requests",description:"This page is about creating a Smart Key Attributes Task, which has to be signed by approvers."},a="Create and Approve Requests",p={},c=[{value:"1. Create Policy Based Key",id:"1-create-policy-based-key",level:2},{value:"2. Create the Authorization Request",id:"2-create-the-authorization-request",level:2},{value:"3. Approve the Sign-Request",id:"3-approve-the-sign-request",level:2},{value:"4. Fetch the Approved Signature",id:"4-fetch-the-approved-signature",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components},{Icon:r}=t;return r||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Icon",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"create-and-approve-requests",children:"Create and Approve Requests"})}),"\n",(0,i.jsx)(t.h2,{id:"1-create-policy-based-key",children:"1. Create Policy Based Key"}),"\n",(0,i.jsx)(t.admonition,{title:"Business Application Required",type:"info",children:(0,i.jsxs)(t.p,{children:["The key creation procedure is performed by the ",(0,i.jsx)(t.a,{href:"/AuthorizationApp/Concepts/role_description",children:"Business Application"})," role."]})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"/tsb/Tutorials/TransactionSecurityBroker/samples/step-by-step/create-policy-based-key",children:"Create a Policy based Key"})," that requires approvals from the Securosys Authorization App."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"2-create-the-authorization-request",children:"2. Create the Authorization Request"}),"\n",(0,i.jsx)(t.admonition,{title:"Business Application Required",type:"info",children:(0,i.jsxs)(t.p,{children:["The request creation procedure is performed by the ",(0,i.jsx)(t.a,{href:"/AuthorizationApp/Concepts/role_description",children:"Business Application"})," role."]})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"/tsb/Tutorials/TransactionSecurityBroker/samples/multi-authorization-samples",children:"Authorization Request Samples"}),", which has to be approved by the Approver based on the policy of the key."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"3-approve-the-sign-request",children:"3. Approve the Sign-Request"}),"\n",(0,i.jsx)(t.admonition,{title:"Approver Required",type:"info",children:(0,i.jsxs)(t.p,{children:["The approval procedure is performed by an ",(0,i.jsx)(t.a,{href:"/AuthorizationApp/Concepts/role_description",children:"Approver"}),"."]})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Securosys Authorization App"})," user ",(0,i.jsx)(t.code,{children:"officer1@securosys.com"})," must approve the signature request. See ",(0,i.jsx)(t.a,{href:"/AuthorizationApp/Tutorials/AuthorizationApp/operational-tasks",children:"Tutorials - Authorization App - Operational Tasks"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"4-fetch-the-approved-signature",children:"4. Fetch the Approved Signature"}),"\n",(0,i.jsx)(t.admonition,{title:"Business Application Required",type:"info",children:(0,i.jsxs)(t.p,{children:["The result fetching procedure is performed by the ",(0,i.jsx)(t.a,{href:"/AuthorizationApp/Concepts/role_description",children:"Business Application"})," role."]})}),"\n",(0,i.jsxs)(t.p,{children:["After the required approvals are completed, you can retrieve the signed data. This step involves using the unique request ID from the initial sign request to obtain the status and the resulting signature. The signature will only be available if the quorum has been met and the request status is marked as ",(0,i.jsx)(t.code,{children:"EXECUTED"}),"."]}),"\n",(0,i.jsx)(t.admonition,{title:"Fetch Approval Task",type:"tip",children:(0,i.jsxs)(t.p,{children:["Replace the ",(0,i.jsx)(t.code,{children:"{id}"})," with the id returned in the first request, e.g. ",(0,i.jsx)(t.code,{children:"4e8731d8-0ae6-4444-8a8c-b73ab5f0ba18"})]})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"POST"}),": ",(0,i.jsx)(t.a,{href:"https://tsb-demo.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Requests/getRequestStatus_1",children:(0,i.jsx)(t.code,{children:"/v1/request/{id}"})})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Response"})," Status: 200"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{10}",children:'{\n  "id": "4e8731d8-0ae6-4444-8a8c-b73ab5f0ba18",\n  "status": "EXECUTED",\n  "executionTime": "2020-06-24T08:54:47Z",\n  "approvedBy": [\n    "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArA0bxSqhL7xfvcHbKKa8wMTMsIeJfYRdIgPxp5cU9JcmV86kyfpyRcSNSi44LVeNmAi94F3OZrXXi6CZvWrFL+VcewUtUSu+kG5oLJ9T4O6R2I5GO2Ev1HJnK3WfHOsFKFxLGzmKyjEkSLGgopY+Nh74K8Q6yxsvQPETOs9TzQiUXFYlfEZnbjUWG4eAgW9WWEopmK/X295ToOuTHFzmzO00btkjAy6vwWOabCE4kaJg+bCNW1snZz84uonr60rB9H0Mj98RbTfbDyMh6cIkaj8WrXeaYh4fxQYXApYu3nzhe3Q1bNCzV5M68rCsgVrmWcK/xUhM9BK6QHSwS/l76wIDAQAB"\n  ],\n  "notYetApprovedBy": [],\n  "rejectedBy": [],\n  "result": "H3bq8PdgSiAlhB0kt1RSD6a3JYXZoj/dz3Nb/MHlgISnmh6x3TPtnV+9mUnw8PV2Ss1pq8txdMOBg9SF8uaKyUvFtLl/QFHIgllm/Q/uvrjaM205Cdz1uaSLePXaNXeC012l1sqlhnyqGKxKTKejMngzNHAnOpwU7kGCEpKPFWL5ltaBRYd3Q/I/F9IufAsKHj+3ky/p6tYN5VPhJSKiSE2YuVyOzGPHY40ipVo/7deBtUUjZmaZAgVQNC1mC79LOhIHLj8Ce4i41CbFZA+ZSMe+nx5bP/7uPA+kbGAjvNS3KLOFeZJ2OJCkTuThsXVh7rTp9tVqYqHU1LZm8f9bYA=="\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(r,{icon:"fa-solid fa-triangle-exclamation",size:"lg"})," If the quorum has been filled the request status is ",(0,i.jsx)(t.code,{children:"EXECUTED"})," and the ",(0,i.jsx)(t.code,{children:"result"})," contains the actual signature ",(0,i.jsx)(r,{icon:"fa-solid fa-triangle-exclamation",size:"lg"})]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>a});var s=r(96540);const i={},n=s.createContext(i);function o(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);