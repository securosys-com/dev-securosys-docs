"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[29360],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var r=n(96540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}},45792:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Installation/configuration","title":"Configuring Secrets Engine plugin for HashiCorp Vault","description":"Configuring Securosy\' Secrets Engine plugin for HashiCorp Vault","source":"@site/hc_sse/Installation/configuration.md","sourceDirName":"Installation","slug":"/Installation/configuration","permalink":"/hc_sse/Installation/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Configuring Secrets Engine plugin for HashiCorp Vault","sidebar_label":"Configure the plugin","description":"Configuring Securosy\' Secrets Engine plugin for HashiCorp Vault","keywords":["hsm","cloud hsm"]},"sidebar":"tutorialSidebar","previous":{"title":"Install the plugin","permalink":"/hc_sse/Installation/"},"next":{"title":"FAQ","permalink":"/hc_sse/Installation/faq"}}');var i=n(74848),s=n(28453);const o={sidebar_position:3,title:"Configuring Secrets Engine plugin for HashiCorp Vault",sidebar_label:"Configure the plugin",description:"Configuring Securosy' Secrets Engine plugin for HashiCorp Vault",keywords:["hsm","cloud hsm"]},a="Configure the plugin",l={},c=[{value:"Example for disabled authorization",id:"example-for-disabled-authorization",level:2},{value:"Example for JWT token authorization",id:"example-for-jwt-token-authorization",level:2},{value:"Example for Certificate authorization",id:"example-for-certificate-authorization",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"configure-the-plugin",children:"Configure the plugin"})}),"\n",(0,i.jsx)(t.p,{children:"To access your Securosys Hardware Security Module (HSM), configure the plugin with the following attributes (required:)"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Attribute"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Description"})})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"auth"})})}),(0,i.jsxs)(t.td,{children:["Attribute defines the authorization type to TSB. The value for this attribute can be ",(0,i.jsx)(t.code,{children:"TOKEN"}),", ",(0,i.jsx)(t.code,{children:"CERT"})," or ",(0,i.jsx)(t.code,{children:"NONE"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"restapi"})})}),(0,i.jsxs)(t.td,{children:["REST API URL to access the REST/TSB endpoint (available from your Security Officer). For CloudHSM service see ",(0,i.jsx)(t.a,{href:"/connectivity-details/cloudhsm-connectivity-details",children:"Connectivity Details"}),"."]})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["Define additional attributes based on the selected authorization type ",(0,i.jsx)(t.code,{children:"auth"}),":"]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Authorization Type"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Additional Attributes"})})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"TOKEN"})})}),(0,i.jsxs)(t.td,{children:["Add the attribute ",(0,i.jsx)(t.code,{children:"bearertoken"})," with the JWT token"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"CERT"})})}),(0,i.jsxs)(t.td,{children:["Setup ",(0,i.jsx)(t.code,{children:"certpath"})," with local PATH to the certificate and ",(0,i.jsx)(t.code,{children:"keypath"})," with local PATH to the key."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"NONE"})})}),(0,i.jsx)(t.td,{children:"No additional attributes required."})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"Use the  following command to write configuration attributes for your HSM:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ vault write securosys-hsm/config {config_attributes}\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"curl --location --request PUT '<server_addr>/v1/securosys-hsm/config' \\\n--header 'X-Vault-Token: <vault_access_token>' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode '{config_attribute_key}={config_attribute_value}' \\\n"})}),"\n",(0,i.jsx)(t.h2,{id:"example-for-disabled-authorization",children:"Example for disabled authorization"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:'$ vault write securosys-hsm/config \nauth="NONE" \nrestapi="https://primusdev.cloudshsm.com"\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"curl --location --request PUT '<server_addr>/v1/securosys-hsm/config' \\\n--header 'X-Vault-Token: <vault_access_token>' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'auth=NONE' \\\n--data-urlencode 'restapi=https://primusdev.cloudshsm.com'\n"})}),"\n",(0,i.jsx)(t.h2,{id:"example-for-jwt-token-authorization",children:"Example for JWT token authorization"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:'$ vault write securosys-hsm/config \nauth="TOKEN" \nbearertoken="jwt token string"\nrestapi="https://primusdev.cloudshsm.com"\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"curl --location --request PUT '<server_addr>/v1/securosys-hsm/config' \\\n--header 'X-Vault-Token: <vault_access_token>' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'auth=TOKEN' \\\n--data-urlencode 'bearertoken=jwt token string' \\\n--data-urlencode 'restapi=https://primusdev.cloudshsm.com'\n"})}),"\n",(0,i.jsx)(t.h2,{id:"example-for-certificate-authorization",children:"Example for Certificate authorization"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:'$ vault write securosys-hsm/config \nauth="CERT" \ncertpath="local_absolute_path_to_certificate.pem"\nkeypath="local_absolute_path_to_private.key"\nrestapi="https://primusdev.cloudshsm.com"\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"curl --location --request PUT '<server_addr>/v1/securosys-hsm/config' \\\n--header 'X-Vault-Token: <vault_access_token>' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'auth=CERT' \\\n--data-urlencode 'certpath=local_absolute_path_to_certificate.pem' \\\n--data-urlencode 'keypath=local_absolute_path_to_private.pem' \\\n--data-urlencode 'restapi=https://primusdev.cloudshsm.com'\n"})}),"\n",(0,i.jsxs)(t.admonition,{title:"Configuration update",type:"tip",children:[(0,i.jsxs)(t.p,{children:["Whenever there are changes to the configuration, the plugin will attempt to connect to the defined ",(0,i.jsx)(t.strong,{children:"Transaction Security Broker (TSB)"})," using the provided settings:"]}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["If the connection is successful, the plugin will ",(0,i.jsx)(t.strong,{children:"write"})," or ",(0,i.jsx)(t.strong,{children:"overwrite"})," the configuration"]}),"\n",(0,i.jsxs)(t.li,{children:["otherwise, the previous configuration will remain ",(0,i.jsx)(t.strong,{children:"unchanged"}),"."]}),"\n"]})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);