"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[52235],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var s=n(96540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}},43802:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/approval_selfsigncertificate-010c0384b5f8b951c1940093478c61e0.png"},62276:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Tutorials/Certificate/with-ska/SelfSignedCertificate","title":"Self-Signed Certificates with SKA-Key","description":"Guide on creating a self-signed certificate using SKA-Key with Cloud HSM.","source":"@site/tsb/Tutorials/Certificate/with-ska/SelfSignedCertificate.md","sourceDirName":"Tutorials/Certificate/with-ska","slug":"/Tutorials/Certificate/with-ska/SelfSignedCertificate","permalink":"/tsb/Tutorials/Certificate/with-ska/SelfSignedCertificate","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":0,"frontMatter":{"sidebar_position":0,"title":"Self-Signed Certificates with SKA-Key","sidebar_label":"1. Self-Signed Certificate SKA-Key","description":"Guide on creating a self-signed certificate using SKA-Key with Cloud HSM.","keywords":["cybersecurity","data security","key management","cloud hsm","hsm key management","hsm cloud","hsm as a service","cloud based hsm","hsm digital signature","hsm services","hsm service","hsm","hardware security module","SKA-Key","RSA key","SHA256 with RSA","certificate authority","self-sign certificate approval","Securosys approval app"]},"sidebar":"tutorialSidebar","previous":{"title":"Create CSR Download","permalink":"/tsb/Tutorials/Certificate/CreateCsr"},"next":{"title":"2. CSR Creation","permalink":"/tsb/Tutorials/Certificate/with-ska/CertificateSigningRequest"}}');var i=n(74848),r=n(28453);const a={sidebar_position:0,title:"Self-Signed Certificates with SKA-Key",sidebar_label:"1. Self-Signed Certificate SKA-Key",description:"Guide on creating a self-signed certificate using SKA-Key with Cloud HSM.",keywords:["cybersecurity","data security","key management","cloud hsm","hsm key management","hsm cloud","hsm as a service","cloud based hsm","hsm digital signature","hsm services","hsm service","hsm","hardware security module","SKA-Key","RSA key","SHA256 with RSA","certificate authority","self-sign certificate approval","Securosys approval app"]},c="1. Self Signed Certificate",o={},d=[{value:"Create SKA-Key (Smart Key Attributes)",id:"create-ska-key-smart-key-attributes",level:2},{value:"Create a self-signed certificate",id:"create-a-self-signed-certificate",level:2},{value:"Approve the Self-Signed Request",id:"approve-the-self-signed-request",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"1-self-signed-certificate",children:"1. Self Signed Certificate"})}),"\n",(0,i.jsx)(t.h2,{id:"create-ska-key-smart-key-attributes",children:"Create SKA-Key (Smart Key Attributes)"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"POST"}),": ",(0,i.jsx)(t.a,{href:"https://rest-api.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Keys/createKey",children:"/v1/key"})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Description"}),": Create key request to be used as Root-CA key."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{2,13,30,52,74,96}",children:'{\n    "label": "CA.approver.securosys.com",\n    "algorithm": "RSA",\n    "keySize": 2048,\n    "attributes": {\n        "decrypt": false,\n        "sign": true,\n        "unwrap": false,\n        "derive": false,\n        "bip32": false,\n        "extractable": false,\n        "modifiable": true,\n        "destroyable": true\n    },\n    "policy": {\n        "ruleUse": {\n            "tokens": [\n                {\n                    "name": "Token1",\n                    "timelock": 0,\n                    "timeout": 600,\n                    "groups": [\n                        {\n                            "name": "Group1",\n                            "quorum": 1,\n                            "approvals": [\n                                {\n                                    "type": "public_key",\n                                    "name": "ApproverKey1",\n                                    "value": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApLwHSQM4sd93UtEJ+t6G22sopYmL6roZxQGL0GWn7WAaiogfQ5EOM+sYQyeJgtuLQkdfwDBnScJx7IgBiOKFpXdaM9i08hSljFlbTT7zP0XjojtGD4U27nLuLqGUhmloLtc+6yBK2FL/7QWB2c9tyCgHiIhmXZesBhZRRFdrpwP66XoGIsgxt1AxFjV1z5MG0g7DULfUSqWG7gGOxvwITFwmqDwuA6rh952X5iJ7zopSSmGhrTeFrV/1Io0E8SsJhRM9m7BOdcg/X6X+5iqK5Obp6Js18Y7eddf/Q5amQSzwlXx6mJAyj2//1DnGz0UbacKStqgZZiC0xAhLEwo7XQIDAQAB"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        "ruleBlock": {\n            "tokens": [\n                {\n                    "name": "Token1",\n                    "timelock": 0,\n                    "timeout": 600,\n                    "groups": [\n                        {\n                            "name": "Group1",\n                            "quorum": 1,\n                            "approvals": [\n                                {\n                                    "type": "public_key",\n                                    "name": "ApproverKey1",\n                                    "value": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApLwHSQM4sd93UtEJ+t6G22sopYmL6roZxQGL0GWn7WAaiogfQ5EOM+sYQyeJgtuLQkdfwDBnScJx7IgBiOKFpXdaM9i08hSljFlbTT7zP0XjojtGD4U27nLuLqGUhmloLtc+6yBK2FL/7QWB2c9tyCgHiIhmXZesBhZRRFdrpwP66XoGIsgxt1AxFjV1z5MG0g7DULfUSqWG7gGOxvwITFwmqDwuA6rh952X5iJ7zopSSmGhrTeFrV/1Io0E8SsJhRM9m7BOdcg/X6X+5iqK5Obp6Js18Y7eddf/Q5amQSzwlXx6mJAyj2//1DnGz0UbacKStqgZZiC0xAhLEwo7XQIDAQAB"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        "ruleUnblock": {\n            "tokens": [\n                {\n                    "name": "Token1",\n                    "timelock": 0,\n                    "timeout": 600,\n                    "groups": [\n                        {\n                            "name": "Group1",\n                            "quorum": 1,\n                            "approvals": [\n                                {\n                                    "type": "public_key",\n                                    "name": "ApproverKey1",\n                                    "value": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApLwHSQM4sd93UtEJ+t6G22sopYmL6roZxQGL0GWn7WAaiogfQ5EOM+sYQyeJgtuLQkdfwDBnScJx7IgBiOKFpXdaM9i08hSljFlbTT7zP0XjojtGD4U27nLuLqGUhmloLtc+6yBK2FL/7QWB2c9tyCgHiIhmXZesBhZRRFdrpwP66XoGIsgxt1AxFjV1z5MG0g7DULfUSqWG7gGOxvwITFwmqDwuA6rh952X5iJ7zopSSmGhrTeFrV/1Io0E8SsJhRM9m7BOdcg/X6X+5iqK5Obp6Js18Y7eddf/Q5amQSzwlXx6mJAyj2//1DnGz0UbacKStqgZZiC0xAhLEwo7XQIDAQAB"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        "ruleModify": {\n            "tokens": [\n                {\n                    "name": "Token1",\n                    "timelock": 0,\n                    "timeout": 600,\n                    "groups": [\n                        {\n                            "name": "Group1",\n                            "quorum": 1,\n                            "approvals": [\n                                {\n                                    "type": "public_key",\n                                    "name": "ApproverKey1",\n                                    "value": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApLwHSQM4sd93UtEJ+t6G22sopYmL6roZxQGL0GWn7WAaiogfQ5EOM+sYQyeJgtuLQkdfwDBnScJx7IgBiOKFpXdaM9i08hSljFlbTT7zP0XjojtGD4U27nLuLqGUhmloLtc+6yBK2FL/7QWB2c9tyCgHiIhmXZesBhZRRFdrpwP66XoGIsgxt1AxFjV1z5MG0g7DULfUSqWG7gGOxvwITFwmqDwuA6rh952X5iJ7zopSSmGhrTeFrV/1Io0E8SsJhRM9m7BOdcg/X6X+5iqK5Obp6Js18Y7eddf/Q5amQSzwlXx6mJAyj2//1DnGz0UbacKStqgZZiC0xAhLEwo7XQIDAQAB"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        "keyStatus": {\n            "blocked": false\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"create-a-self-signed-certificate",children:"Create a self-signed certificate"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"POST"}),": ",(0,i.jsx)(t.a,{href:"https://rest-api.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Certificate/selfSignCertificateWithSkaKey",children:"/v1/certificate/selfsign"})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Description"}),": Creates and attaches a self-signed certificate to the keypair."]}),"\n",(0,i.jsxs)(t.p,{children:["Setting the ",(0,i.jsx)(t.code,{children:"certificateAuthority"})," to ",(0,i.jsx)(t.code,{children:"true"})," adds the BasicConstraint ",(0,i.jsx)(t.code,{children:"BC:CA:TRUE"}),", should be set for intermediate and CA Authorities."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{3,10}",children:'{\n  "selfSignCertificateRequest": {\n    "signKeyName": "CA.approver.securosys.com",\n    "keyPassword": null,\n    "validity": 3650,\n    "signatureAlgorithm": "SHA256_WITH_RSA",\n    "commonName": "Approver-Intermediate-CA",\n    "certificateAuthority": true,\n    "keyUsage": [\n      "DIGITAL_SIGNATURE",\n      "KEY_CERT_SIGN"\n    ],\n    "extendedKeyUsage": [\n      "ANY_EXTENDED_KEY_USAGE"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Response:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'{\n  "signRequestId": "1c82583f-2cd2-486d-8b03-63f91aad9b7a"\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Remember the ",(0,i.jsx)(t.code,{children:"signRequestId"}),", to fetch the result once the approval is given."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"approve-the-self-signed-request",children:"Approve the Self-Signed Request"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"1. Open the approval app from securosys:"})," ",(0,i.jsx)(t.a,{href:"https://approver.securosys.com/all",children:"https://approver.securosys.com"})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.strong,{children:["2. Approve the request: ",(0,i.jsx)(t.code,{children:"APPROVE"})]})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(43802).A+"",width:"605",height:"218"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"3. Fetch the result:"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"GET:"})," ",(0,i.jsx)(t.a,{href:"https://rest-api.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Requests/getRequestStatus",children:"/v1/request/1c82583f-2cd2-486d-8b03-63f91aad9b7a"})]}),"\n",(0,i.jsxs)(t.p,{children:["Put the ",(0,i.jsx)(t.code,{children:"signRequestId"})," from before we have remembered: id=",(0,i.jsx)(t.code,{children:"1c82583f-2cd2-486d-8b03-63f91aad9b7a"})]}),"\n",(0,i.jsx)(t.admonition,{title:"Request Status",type:"note",children:(0,i.jsxs)(t.p,{children:["If the status of the Request other than ",(0,i.jsx)(t.code,{children:"EXECUTED"})," the approval did not work."]})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Response:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{3,10}",children:'{\n  "id": "bb65ec3e-e6c2-4368-9994-188a2c444cee",\n  "status": "EXECUTED",\n  "executionTime": "2024-01-23T10:54:43Z",\n  "approvedBy": [\n    "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApLwHSQM4sd93UtEJ+t6G22sopYmL6roZxQGL0GWn7WAaiogfQ5EOM+sYQyeJgtuLQkdfwDBnScJx7IgBiOKFpXdaM9i08hSljFlbTT7zP0XjojtGD4U27nLuLqGUhmloLtc+6yBK2FL/7QWB2c9tyCgHiIhmXZesBhZRRFdrpwP66XoGIsgxt1AxFjV1z5MG0g7DULfUSqWG7gGOxvwITFwmqDwuA6rh952X5iJ7zopSSmGhrTeFrV/1Io0E8SsJhRM9m7BOdcg/X6X+5iqK5Obp6Js18Y7eddf/Q5amQSzwlXx6mJAyj2//1DnGz0UbacKStqgZZiC0xAhLEwo7XQIDAQAB"\n  ],\n  "notYetApprovedBy": [],\n  "rejectedBy": [],\n  "result": "true"\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);