"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[37175],{28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var r=n(96540);const t={},o=r.createContext(t);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:s},e.children)}},72454:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Installation/Provider","title":"Connect Primus Tools with the HSM","description":"Connecting Securosys Primus Tools to the Hardware Security Modules (HSMs)","source":"@site/primus-tools/Installation/Provider.md","sourceDirName":"Installation","slug":"/Installation/Provider","permalink":"/primus-tools/Installation/Provider","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Connect Primus Tools with the HSM","sidebar_label":"Connect the HSM","description":"Connecting Securosys Primus Tools to the Hardware Security Modules (HSMs)","keywords":["hsm","cloud hsm"]},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/primus-tools/Installation/primus-tools-installation"},"next":{"title":"Tutorials","permalink":"/primus-tools/category/tutorials"}}');var t=n(74848),o=n(28453);const i={sidebar_position:2,title:"Connect Primus Tools with the HSM",sidebar_label:"Connect the HSM",description:"Connecting Securosys Primus Tools to the Hardware Security Modules (HSMs)",keywords:["hsm","cloud hsm"]},a="Connecting to the HSM",l={},d=[{value:"Fetching the Permanent Secret",id:"fetching-the-permanent-secret",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",input:"input",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"connecting-to-the-hsm",children:"Connecting to the HSM"})}),"\n",(0,t.jsxs)(s.p,{children:["For each Primus Tools ",(0,t.jsx)(s.strong,{children:"command"}),", the following connectivity details have to be provided:"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Connection details (FQDN hostname or IP address, TCP/JCE port number of the HSM)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","User (partition) and credentials (setup password or permanent secret)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","For ",(0,t.jsx)(s.a,{href:"/cloudhsm/overview/",children:"CloudHSM"}),": service user (proxy) and credentials (service password)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"You can retrieve the required passwords or secrets with:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["on command line (caution: history traces have to be cleared manually) ",(0,t.jsx)(s.code,{children:"password <password|permanent-secret>"})]}),"\n",(0,t.jsxs)(s.li,{children:["interactive via keyboard: ",(0,t.jsx)(s.code,{children:"-password consoleinput:"})]}),"\n",(0,t.jsxs)(s.li,{children:["from file (e.g. from USB drive): ",(0,t.jsx)(s.code,{children:"-password file:<path/name> "})," containing either:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"the setup password in plain or blinded format,"}),"\n",(0,t.jsx)(s.li,{children:"the permanent secret in blinded format."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Preview of the ",(0,t.jsx)(s.code,{children:"<HSM connection and credentials>"})," parameters:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"-host <HSM hostname/IP-address> [-port <HSM TCP port number>] /\n-user <user> -password [<password>|consoleinput:|file:<path/name>]] /\n[-primusproxyuser <primusproxyuser>] /\n[-primusproxypassword [<primusproxypassword>|consoleinput:|file:<path/name>]]\n"})}),"\n",(0,t.jsxs)(s.admonition,{type:"tip",children:[(0,t.jsx)(s.mdxAdmonitionTitle,{children:(0,t.jsx)(s.code,{children:"<HSM connection and credentials>"})}),(0,t.jsxs)(s.p,{children:["To keep the documentation consice, the ",(0,t.jsx)(s.code,{children:"<HSM connection and credentials>"})," parameters are used across most Primus Tools commands."]}),(0,t.jsx)(s.p,{children:"It's recommended to note down these parameters ahead of time for easier reference."})]}),"\n",(0,t.jsx)(s.h2,{id:"fetching-the-permanent-secret",children:"Fetching the Permanent Secret"}),"\n",(0,t.jsx)(s.admonition,{title:"Retrieve Permanent Secret",type:"danger",children:(0,t.jsxs)(s.p,{children:["The setup password has a limited lifespan and serves as a ",(0,t.jsx)(s.strong,{children:"temporary"})," credential to retrieve the ",(0,t.jsx)(s.strong,{children:"permanent"})," secret. The access to Primus HSM or CloudHSM will be ",(0,t.jsx)(s.strong,{children:"lost"})," if the permanent secret is not retrieved before the setup password expires."]})}),"\n",(0,t.jsxs)(s.p,{children:["In this example, we will fetch the permanent secret for a connection to a ",(0,t.jsx)(s.strong,{children:"CloudHSM partition"}),"."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["See more details on ",(0,t.jsx)(s.a,{href:"/primus-tools/Tutorials/command-details/credential-management",children:"command parameters and options"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["For ",(0,t.jsx)(s.strong,{children:"on-premises Primus HSM"}),", go back to the ",(0,t.jsx)(s.a,{href:"/primus-tools/Installation/Prerequisites#primus-hsm-configuration",children:"Prerequisites"})," to see how to issue a new setup password."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["See more details on ",(0,t.jsx)(s.a,{href:"https://support.securosys.com/external/knowledge-base/article/63",children:"Setting up passwords and permanent secrets"}),"(account required)."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["CloudHSM credentials are provided during the onboarding procedure. To issue a new valid setup password for CloudHSM, please open a ticket in the ",(0,t.jsx)(s.a,{href:"https://support.securosys.com/external/service-catalogue/18",children:"Securosys Support Portal"}),", make sure to provide your CloudHSM partition name (user)."]}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsx)(s.p,{children:"Requests for issuing a new setup password for CloudHSM are subject to service charges."})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Step-by-Step Guide:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Note down your setup password in the below format, e.g.:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"g3z7Y-5knqc-hkQAs-9A4kE-Ppr6v \n"})}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsxs)(s.li,{children:["Blind and store the temporary setup password to a file with ",(0,t.jsx)(s.code,{children:"BlindPassword"})," command. When prompted by the console input, insert the setup password.\nExample command:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -jar primus-tools.jar BlindPassword consoleinput: -outputfile d:\\pwsetup\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsxs)(s.p,{children:["Secret blinding might impact operation in case of tool migration. For more blinding options, see ",(0,t.jsx)(s.a,{href:"/primus-tools/Tutorials/command-details/credential-management",children:"Credential Management"}),"."]})}),"\n",(0,t.jsxs)(s.p,{children:["Results in having a file ",(0,t.jsx)(s.code,{children:"D:\\pwsetup"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"blinded-aes:c775dbe31d545d38dcb342ccadee236e3ec\u2026\u20266005d6766808e7fc522ef60d5a670b6e9c111837fe451041\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:"Set and blind the CloudHSM proxy password."}),"\n"]}),"\n",(0,t.jsx)(s.admonition,{type:"caution",children:(0,t.jsx)(s.p,{children:"The proxy user and password are only applicable when working with CloudHSM. For on-premises Primus HSM you can skip this step."})}),"\n",(0,t.jsx)(s.p,{children:"Example command:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -jar primus-tools.jar BlindPassword consoleinput: -outputfile d:\\pwproxy\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"4",children:["\n",(0,t.jsxs)(s.li,{children:["Use the newly generated blinded setup password file ",(0,t.jsx)(s.code,{children:"pwsetup"})," and proxy password file ",(0,t.jsx)(s.code,{children:"pwproxy"})," with the ",(0,t.jsx)(s.code,{children:"GetUserSecret"})," command to fetch the permanent secret to a blinded file:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -jar primus-tools.jar GetUserSecret /\n-host a-api.cloudshsm.com -port 2300 /\n-user DEMO-TEST -password file:d:\\pwsetup /\n-primusproxyuser DEMO-TESTP -primusproxypassword file:d:\\pwproxy /\n-blinded -outputfile d:\\pwsecret\n"})}),"\n",(0,t.jsxs)(s.admonition,{type:"info",children:[(0,t.jsxs)(s.p,{children:["Replace the host URL with the relevant connectivity details for general on-premises Primus HSM and CloudHSM connectivity, see ",(0,t.jsx)(s.a,{href:"/connectivity-details/overview",children:"HSM - Connectivity Details"}),"."]}),(0,t.jsx)(s.p,{children:"Please ensure that there are no firewall components blocking communication between your system and the Primus HSM or CloudHSM."})]}),"\n",(0,t.jsxs)(s.ol,{start:"5",children:["\n",(0,t.jsxs)(s.li,{children:["Test the connection to the CloudHSM by using the ",(0,t.jsx)(s.code,{children:"Login"})," command. Use the permanent secret file ",(0,t.jsx)(s.code,{children:"pwsecret"}),":"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"java -jar primus-tools.jar Login \n-host a-api.cloudshsm.com -port 2300\n-user DEMO-TEST -password file:d:\\pwsecret\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Continue with the various ",(0,t.jsx)(s.a,{href:"/primus-tools/Tutorials/command-overview",children:"command tutorials"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);