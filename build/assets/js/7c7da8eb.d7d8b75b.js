"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[6114],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(96540);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},56370:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Tutorials/Signing/SignPDF","title":"Sign a PDF with an Elliptic Curve (EC) Key","description":"Learn how to sign a PDF using REST API and EC keys on Cloud HSM.","source":"@site/tsb/Tutorials/Signing/SignPDF.md","sourceDirName":"Tutorials/Signing","slug":"/Tutorials/Signing/SignPDF","permalink":"/tsb/Tutorials/Signing/SignPDF","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":0,"frontMatter":{"sidebar_position":0,"title":"Sign a PDF with an Elliptic Curve (EC) Key","sidebar_label":"Sign a PDF","description":"Learn how to sign a PDF using REST API and EC keys on Cloud HSM.","keywords":["cybersecurity","data security","key management","cloud hsm","hsm key management","hsm cloud","hsm as a service","cloud based hsm","hsm digital signature","hsm services","hsm service","hsm","hardware security module","PDF signing","REST API","create EC key","elliptic curve","cloud security","digital signatures","cryptographic operations","PDF signature","secure PDF signing"]},"sidebar":"tutorialSidebar","previous":{"title":"Compatibility & Release","permalink":"/tsb/Tutorials/Post-Quantum-Cryptography/pqc-release-overview"},"next":{"title":"Sign & Verify","permalink":"/tsb/Tutorials/Signing/SignRequest"}}');var r=s(74848),a=s(28453);const t={sidebar_position:0,title:"Sign a PDF with an Elliptic Curve (EC) Key",sidebar_label:"Sign a PDF",description:"Learn how to sign a PDF using REST API and EC keys on Cloud HSM.",keywords:["cybersecurity","data security","key management","cloud hsm","hsm key management","hsm cloud","hsm as a service","cloud based hsm","hsm digital signature","hsm services","hsm service","hsm","hardware security module","PDF signing","REST API","create EC key","elliptic curve","cloud security","digital signatures","cryptographic operations","PDF signature","secure PDF signing"]},l="Sign a PDF",o={},c=[{value:"Create EC Key (Elliptic Curve)",id:"create-ec-key-elliptic-curve",level:2},{value:"Sign a Payload",id:"sign-a-payload",level:2},{value:"Attributes regarded by the service:",id:"attributes-regarded-by-the-service",level:3},{value:"Verify",id:"verify",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sign-a-pdf",children:"Sign a PDF"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"REST_API"})," license is required to create and use keys without policy"]}),"\n",(0,r.jsx)(n.h2,{id:"create-ec-key-elliptic-curve",children:"Create EC Key (Elliptic Curve)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": ",(0,r.jsx)(n.a,{href:"https://primusdev.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Keys/createKey",children:"/v1/key"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create key request."]}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"<keyname>"})," and ",(0,r.jsx)(n.code,{children:"password"}),". The password is optional and can be deleted completely."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n    "label": "<keyname>",\n    "password": [ "R","E","P","L","A","C","E" ],\n    "algorithm": "EC",\n    "curveOid": "1.3.132.0.10",\n    "attributes": {\n        "encrypt": false,\n        "decrypt": false,\n        "verify": true,\n        "sign": true,\n        "wrap": false,\n        "unwrap": false,\n        "derive": false,\n        "bip32": false,\n        "extractable": false,\n        "modifiable": true,\n        "destroyable": true,\n        "sensitive": true,\n        "copyable": false\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"sign-a-payload",children:"Sign a Payload"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST"}),": ",(0,r.jsx)(n.a,{href:"https://rest-api.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Synchronous%20Key%20Operations/synchronousSign",children:"/v1/synchronousSign"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Contains an sign request without metadata."]}),"\n",(0,r.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,r.jsx)(n.p,{children:"The size limit for payload is 64 KB (total request size to the HSM). Larger payloads can be hashed by the caller\nand the hash is used as payload."})}),"\n",(0,r.jsx)(n.h3,{id:"attributes-regarded-by-the-service",children:"Attributes regarded by the service:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"signRequest.payload"})," = the hash of the PDF to be signed using any hash algorithm preferred by the caller. In this example SHA-256 is used ",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(n.code,{children:"signRequest.signKeyName"})," = the key to be used for signing ",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(n.code,{children:"signRequest.signatureAlgorithm"})," = NONE_WITH_ECDSA, indicates that the payload has already been hashed by the caller and is in proper size. No hashing will be done on the HSM. This example is for EC keys. Corresponding algorithms also available for other key types"]}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"<keyname>"})," and ",(0,r.jsx)(n.code,{children:"password"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n    "signRequest": {\n        "payload": "V9XQHTAVDqEypvi82Gf/IV1o2BrLQDRZMqKjjWpNxjM=",\n        "payloadType": "PDF",\n        "keyPassword": [ "R","E","P","L","A","C","E" ],\n        "signKeyName": "<keyname>",\n        "metaData": "\n        "metaDataSignature": "MEUCIF+jC2zyMeONKK2zArTgn4pWbFqlxNJg2DnTwgqlSK1oAiEApFpnXQhdJmFidwOnc5rDPCiex67+pot2cbb07mDqU4I=",\n        "signatureAlgorithm": "NONE_WITH_ECDSA"\n    }\n}\n\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n  "signature": "MEQCIGvSZ9Fylbf5ofsbXxDnpjWfr+IOPVL3qSUzlO7cDK88AiAzdZ7h5eXI9zo4UauFoVG3NEB9U99+leODNuJXGMnjvg=="\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"verify",children:"Verify"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"POST:"})," ",(0,r.jsx)(n.a,{href:"https://rest-api.cloudshsm.com/swagger-ui/index.html?configUrl=/v3/api-docs/swagger-config#/Synchronous%20Key%20Operations/verifySignature",children:"/v1/verify"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"})," Verify signature of a payload"]}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"signature"})," from the previous response and set the initial ",(0,r.jsx)(n.code,{children:"payload"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n  "verifySignatureRequest": {\n    "signKeyName": "<keyname>",\n    "masterKeyPassword": [ "R","E","P","L","A","C","E" ],\n    "signatureAlgorithm": "NONE_WITH_ECDSA",\n    "payload": "V9XQHTAVDqEypvi82Gf/IV1o2BrLQDRZMqKjjWpNxjM=",\n    "signature": "MEQCIGvSZ9Fylbf5ofsbXxDnpjWfr+IOPVL3qSUzlO7cDK88AiAzdZ7h5eXI9zo4UauFoVG3NEB9U99+leODNuJXGMnjvg=="\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'{\n  "signatureValid": true\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);