"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[27956],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},33571:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Tutorials/Examples/Example-Encrypt-Decrypt","title":"Encryption of data using AWS KMS","description":"Learn how to encrypt and decrypt data using AWS KMS and Securosys HSM. This guide covers the necessary steps, including connecting to an EC2 instance, deploying the XKS Proxy, and executing encryption and decryption commands with base64-encoded plaintext.","source":"@site/xks/Tutorials/Examples/Example-Encrypt-Decrypt.md","sourceDirName":"Tutorials/Examples","slug":"/Tutorials/Examples/Example-Encrypt-Decrypt","permalink":"/xks/Tutorials/Examples/Example-Encrypt-Decrypt","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"AWS","permalink":"/xks/tags/aws"},{"inline":true,"label":"AWS KMS","permalink":"/xks/tags/aws-kms"},{"inline":true,"label":"XKS","permalink":"/xks/tags/xks"},{"inline":true,"label":"EC2","permalink":"/xks/tags/ec-2"}],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Encryption of data using AWS KMS","sidebar_label":"Encrypt data","description":"Learn how to encrypt and decrypt data using AWS KMS and Securosys HSM. This guide covers the necessary steps, including connecting to an EC2 instance, deploying the XKS Proxy, and executing encryption and decryption commands with base64-encoded plaintext.","tags":["AWS","AWS KMS","XKS","EC2"]},"sidebar":"tutorialSidebar","previous":{"title":"Create External Key Store \ud83d\udddd\ufe0f","permalink":"/xks/Tutorials/Examples/Example-AWS-KMS"},"next":{"title":"Generate .jks file","permalink":"/xks/Tutorials/Examples/Example-jks"}}');var r=t(74848),i=t(28453);const a={sidebar_position:1,title:"Encryption of data using AWS KMS",sidebar_label:"Encrypt data",description:"Learn how to encrypt and decrypt data using AWS KMS and Securosys HSM. This guide covers the necessary steps, including connecting to an EC2 instance, deploying the XKS Proxy, and executing encryption and decryption commands with base64-encoded plaintext.",tags:["AWS","AWS KMS","XKS","EC2"]},o="Encrypting data",c={},l=[{value:"AWS KMS &amp; Securosys HSM - Integration Guide",id:"aws-kms--securosys-hsm---integration-guide",level:3},{value:"More content",id:"more-content",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"encrypting-data",children:"Encrypting data"})}),"\n",(0,r.jsx)(n.h3,{id:"aws-kms--securosys-hsm---integration-guide",children:"AWS KMS & Securosys HSM - Integration Guide"}),"\n",(0,r.jsx)(n.p,{children:"This example demonstrates the encryption and decryption operations detailed in the AWS documentation."}),"\n",(0,r.jsx)(n.p,{children:"To execute these operations, you must first establish a connection with your EC2 instance and deploy the Securosys XKS Proxy. The following commands are recommended for this purpose:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"service xksproxy start|stop|restart\n"})}),"\n",(0,r.jsx)(n.p,{children:"In the example command below, we use a specified key generated from the HSM to encrypt a base64-encoded plaintext string."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"aws kms encrypt --key-id arn:aws:kms:eu-central-1:123456789:key/b111ab11-d1ee-11c1-bd11-111e11f111a1\n--plaintext SGVsbG8h --output text --query CiphertextBlob | base64 --decode \\> /home/ec2-user/EncryptedFile\n"})}),"\n",(0,r.jsx)(n.p,{children:"The below command uses the previously specified key to decrypt the plaintext."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"aws kms decrypt --ciphertext-blob fileb:///home/ec2-user/EncryptedFile --key-id\narn:aws:kms:eu-central-1:123456789:key/b111ab11-d1ee-11c1-bd11-111e11f111a1 --output text\n--query Plaintext | base64 --decode \\> /home/ec2-user/PlaintextFile\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Base64 Encoding",type:"info",children:(0,r.jsxs)(n.p,{children:["Both the plaintext input for encryption and the resulting plaintext after decryption must be ",(0,r.jsx)(n.strong,{children:"base64-encoded"}),'. If you encounter any errors in the console, check the application logs in the "xks_proxy.log" file. For more information on Securosys XKS Proxy logging, refer to the ',(0,r.jsx)(n.a,{href:"/xks/Tutorials/Troubleshooting/logging",children:"Troubleshooting chapter"}),"."]})}),"\n",(0,r.jsx)(n.h3,{id:"more-content",children:"More content"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/xks/Tutorials/Troubleshooting/Logging-Errors",children:"XKS proxy Log Error Codes"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../../Use-Cases/usecases",children:"Encrypting AWS S3 Bucket"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/aws-byok/overview",children:"AWS Bring Your Own Key (BYOK)"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);