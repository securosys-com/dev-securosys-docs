"use strict";(self.webpackChunksecurosys_docs=self.webpackChunksecurosys_docs||[]).push([[6739],{28453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>s});var n=t(96540);const a={},o=n.createContext(a);function i(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(o.Provider,{value:r},e.children)}},59753:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"Quickstart","title":"Getting started with Microsoft Azure BYOK","description":"This Quickstart section provides a comprehensive task listing of the Bring Your Own Key (BYOK) process for Azure Key Vault. For more detailed instructions please consult the Installation section. Visit Prerequisites for the necessary preparations beforehand.","source":"@site/microsoft-byok/Quickstart.md","sourceDirName":".","slug":"/Quickstart","permalink":"/microsoft-byok/Quickstart","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1741162132000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Getting started with Microsoft Azure BYOK","sidebar_label":"Quickstart"},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/microsoft-byok/overview"},"next":{"title":"Installation","permalink":"/microsoft-byok/category/installation"}}');var a=t(74848),o=t(28453);t(65537),t(79329);const i={sidebar_position:1,title:"Getting started with Microsoft Azure BYOK",sidebar_label:"Quickstart"},s="Getting Started with Azure BYOK",l={},u=[{value:"Install and Configure Primus Tools",id:"install-and-configure-primus-tools",level:2},{value:"Azure Portal Login",id:"azure-portal-login",level:2},{value:"New Resource Group",id:"new-resource-group",level:2},{value:"Create New Key Vault",id:"create-new-key-vault",level:2},{value:"Create New Key Exchange Key",id:"create-new-key-exchange-key",level:2},{value:"Download KEK public key",id:"download-kek-public-key",level:2},{value:"Create Target Key",id:"create-target-key",level:2},{value:"Generate BYOK package",id:"generate-byok-package",level:2},{value:"Import BYOK package",id:"import-byok-package",level:2},{value:"Verify Imported Target Key",id:"verify-imported-target-key",level:2}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"getting-started-with-azure-byok",children:"Getting Started with Azure BYOK"})}),"\n",(0,a.jsxs)(r.p,{children:["This Quickstart section provides a comprehensive task listing of the Bring Your Own Key (BYOK) process for Azure Key Vault. For more detailed instructions please consult the ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Installation/Prerequisites",children:"Installation"})," section. Visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Installation/Prerequisites",children:"Prerequisites"})," for the necessary preparations beforehand."]}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"Parameters in this document are shown as an example. Replace these parameters with your own."})}),"\n",(0,a.jsx)(r.h2,{id:"install-and-configure-primus-tools",children:"Install and Configure Primus Tools"}),"\n",(0,a.jsxs)(r.p,{children:["Download, install and configure the Primus Tools on the computer with an established Primus HSM or CloudHSM connection. For more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Installation/PrimusTools",children:"Primus Tools Installation"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"azure-portal-login",children:"Azure Portal Login"}),"\n",(0,a.jsxs)(r.p,{children:["Login into Azure portal using Windows PowerShell. For more information visit ",(0,a.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/cli/azure/get-started-with-azure-cli",children:"Sign into the Azure CLI"}),"."]}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"The Azure command examples in this document are provided with Azure CLI. If preferred Azure portal GUI can also be used."})}),"\n",(0,a.jsx)(r.h2,{id:"new-resource-group",children:"New Resource Group"}),"\n",(0,a.jsxs)(r.p,{children:["On Azure portal, create a new resource group, for example ",(0,a.jsx)(r.code,{children:"SecurosysPrimusGroup"}),", and specify the Azure location, for example  ",(0,a.jsx)(r.code,{children:"switzerlandnorth"}),". For more information visit ",(0,a.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-portal",children:"Create resource Groups"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"create-new-key-vault",children:"Create New Key Vault"}),"\n",(0,a.jsx)(r.p,{children:"On Azure portal, create a new Key Vault on your Azure portal or use an existing one."}),"\n",(0,a.jsxs)(r.p,{children:["For more information visit ",(0,a.jsx)(r.a,{href:"https://learn.microsoft.com/en-us/azure/key-vault/general/quick-create-portal",children:"Create Key Vault"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"create-new-key-exchange-key",children:"Create New Key Exchange Key"}),"\n",(0,a.jsxs)(r.p,{children:["In Key Vault, generate a key (referred to as a Key Exchange Key (KEK)). The KEK must be an ",(0,a.jsx)(r.code,{children:"RSA-HSM"})," key that has only the ",(0,a.jsx)(r.code,{children:"import key"})," operation. Only Key Vault Premium SKU supports RSA-HSM keys. Note down the ",(0,a.jsx)(r.code,{children:"kid"})," URL for later usage."]}),"\n",(0,a.jsxs)(r.p,{children:["For more information visit the section ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Generate-KEK",children:"Generate Azure Key Encryption Key"}),"."]}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"The KEK must be in the same Key Vault where the target key will be imported."})}),"\n",(0,a.jsx)(r.h2,{id:"download-kek-public-key",children:"Download KEK public key"}),"\n",(0,a.jsxs)(r.p,{children:["In Key Vault, download the public part of the KEK as ",(0,a.jsx)(r.code,{children:".pem"})," file, it will be used to wrap the target key.\nFor more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Generate-KEK",children:"Generate Azure Key Encryption Key"}),"."]}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"The private part of the KEK is (generated inside the Azure Key Vault HSM) is not exportable)."})}),"\n",(0,a.jsx)(r.h2,{id:"create-target-key",children:"Create Target Key"}),"\n",(0,a.jsxs)(r.p,{children:["Using Primus Tools, create the target key on the Primus HSM or CloudHSM. For more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Generate-Target-key#create-target-key",children:"Create Target Key"}),"."]}),"\n",(0,a.jsx)(r.admonition,{type:"note",children:(0,a.jsx)(r.p,{children:"To create a target key other key generation tools/utilities can be used."})}),"\n",(0,a.jsx)(r.h2,{id:"generate-byok-package",children:"Generate BYOK package"}),"\n",(0,a.jsxs)(r.p,{children:["Using Primus Tools command ",(0,a.jsx)(r.code,{children:"AzureByokExport"})," wrap the target key and generate the ",(0,a.jsx)(r.code,{children:".byok"})," package on the client computer. For more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Generate-Target-key#wrap-target-key",children:"Wrap Target Key"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"import-byok-package",children:"Import BYOK package"}),"\n",(0,a.jsxs)(r.p,{children:["Import the ",(0,a.jsx)(r.code,{children:".byok"})," package from the client computer into the Azure Key Vault. For more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Transfer-Target-Key",children:"Transfer Target Key"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"verify-imported-target-key",children:"Verify Imported Target Key"}),"\n",(0,a.jsxs)(r.p,{children:["Check the existence of the imported target key on Azure portal. If the verification was successful the key is now in use. For more information visit ",(0,a.jsx)(r.a,{href:"/microsoft-byok/Tutorials/Transfer-Target-Key#verify-imported-target-key",children:"Verify Imported Target Key"}),"."]})]})}function d(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},65537:(e,r,t)=>{t.d(r,{A:()=>w});var n=t(96540),a=t(34164),o=t(65627),i=t(56347),s=t(50372),l=t(30604),u=t(11861),c=t(78749);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:r,children:t}=e;return(0,n.useMemo)((()=>{const e=r??function(e){return d(e).map((e=>{let{props:{value:r,label:t,attributes:n,default:a}}=e;return{value:r,label:t,attributes:n,default:a}}))}(t);return function(e){const r=(0,u.XI)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,t])}function p(e){let{value:r,tabValues:t}=e;return t.some((e=>e.value===r))}function m(e){let{queryString:r=!1,groupId:t}=e;const a=(0,i.W6)(),o=function(e){let{queryString:r=!1,groupId:t}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:r,groupId:t});return[(0,l.aZ)(o),(0,n.useCallback)((e=>{if(!o)return;const r=new URLSearchParams(a.location.search);r.set(o,e),a.replace({...a.location,search:r.toString()})}),[o,a])]}function f(e){const{defaultValue:r,queryString:t=!1,groupId:a}=e,o=h(e),[i,l]=(0,n.useState)((()=>function(e){let{defaultValue:r,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!p({value:r,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:o}))),[u,d]=m({queryString:t,groupId:a}),[f,y]=function(e){let{groupId:r}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(r),[a,o]=(0,c.Dv)(t);return[a,(0,n.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),g=(()=>{const e=u??f;return p({value:e,tabValues:o})?e:null})();(0,s.A)((()=>{g&&l(g)}),[g]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),y(e)}),[d,y,o]),tabValues:o}}var y=t(9136);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function k(e){let{className:r,block:t,selectedValue:n,selectValue:i,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),c=e=>{const r=e.currentTarget,t=l.indexOf(r),a=s[t].value;a!==n&&(u(r),i(a))},d=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;r=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;r=l[t]??l[l.length-1];break}}r?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},r),children:s.map((e=>{let{value:r,label:t,attributes:o}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:n===r?0:-1,"aria-selected":n===r,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...o,className:(0,a.A)("tabs__item",g.tabItem,o?.className,{"tabs__item--active":n===r}),children:t??r},r)}))})}function v(e){let{lazy:r,children:t,selectedValue:o}=e;const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(r){const e=i.find((e=>e.props.value===o));return e?(0,n.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,r)=>(0,n.cloneElement)(e,{key:r,hidden:e.props.value!==o})))})}function x(e){const r=f(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,b.jsx)(k,{...r,...e}),(0,b.jsx)(v,{...r,...e})]})}function w(e){const r=(0,y.A)();return(0,b.jsx)(x,{...e,children:d(e.children)},String(r))}},79329:(e,r,t)=>{t.d(r,{A:()=>i});t(96540);var n=t(34164);const a={tabItem:"tabItem_Ymn6"};var o=t(74848);function i(e){let{children:r,hidden:t,className:i}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,n.A)(a.tabItem,i),hidden:t,children:r})}}}]);